# ุชุญููู ุดุงูู ูุนูููุฉ ุทูุจ ุงูุฎุฏูุฉ - ูู ุงููุณุชุฎุฏู ุฅูู ุงูููู

## ๐ ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงููุณุชูุฏ ูุดุฑุญ ุจุงูุชูุตูู ููู ูุชู ุฅูุดุงุก ุทูุจ ุฎุฏูุฉ ูู ุงููุณุชุฎุฏู ุญุชู ูุตู ุฅูู ุงูููู ูููู ูุชุบูุฑ ุฎูุงู ุงูุนูููุฉ.

---

## ๐ ุงูุชุฏูู ุงููุงูู ููุนูููุฉ

### ุงููุฑุญูุฉ 1๏ธโฃ: ุฅูุดุงุก ุงูุทูุจ ูู ุชุทุจูู ุงููุณุชุฎุฏู

#### 1.1 ุงุฎุชูุงุฑ ููุน ุงูุฎุฏูุฉ
- **ุงููููุน**: `flutter_app/lib/screens/home_screen.dart`
- **ุงูุนูููุฉ**: 
  - ุงููุณุชุฎุฏู ูุฎุชุงุฑ ููุน ุงูุฎุฏูุฉ (ูุซูุงู: ุจูุดุฑ ูุชูููุ ุจุทุงุฑูุฉ ูุชูููุฉ)
  - ูุชู ูุชุญ `RequestScreen` ูุน ููุน ุงูุฎุฏูุฉ ุงููุญุฏุฏ

#### 1.2 ููุก ุจูุงูุงุช ุงูุทูุจ
- **ุงููููุน**: `flutter_app/lib/screens/request_screen.dart`
- **ุงูุญููู ุงููุทููุจุฉ**:
  - โ **ููุน ูููุฏูู ุงูุณูุงุฑุฉ** (`carModel`) - **ูุทููุจ**
  - โช **ุฑูู ุงูููุญุฉ** (`plateNumber`) - ุงุฎุชูุงุฑู
  - โ **ูุตู ุงููุดููุฉ** (`notes`) - **ูุทููุจ**
  - โ **ุงููููุน** (`latitude`, `longitude`) - **ูุทููุจ**

#### 1.3 ุชุญุฏูุฏ ุงููููุน
- **ุงูุนูููุฉ**:
  1. ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุฒุฑ "ุชุญุฏูุฏ ูููุนู"
  2. ุงูุชุทุจูู ูุทูุจ ุตูุงุญูุงุช GPS
  3. ูุชู ุงูุญุตูู ุนูู ุงูุฅุญุฏุงุซูุงุช ุจุงุณุชุฎุฏุงู `Geolocator.getCurrentPosition()`
  4. ูุชู ุญูุธ `_latitude` ู `_longitude`

#### 1.4 ุญุณุงุจ ุงูุณุนุฑ
- **ุงูููุฏ**: `AppConstants.getServicePrice(serviceType)`
- ูุชู ุญุณุงุจ ุงูุณุนุฑ ุชููุงุฆูุงู ุจูุงุกู ุนูู ููุน ุงูุฎุฏูุฉ
- ุจุนุถ ุงูุฎุฏูุงุช ูุฏ ูููู ุณุนุฑูุง `null` (ูุชุบูุฑ)

#### 1.5 ุฅุฑุณุงู ุงูุทูุจ ุฅูู Backend
- **ุงููููุน**: `flutter_app/lib/services/api_service.dart` โ `submitRequest()`
- **ุงูู Endpoint**: `POST /new-request`
- **ุงูุจูุงูุงุช ุงููุฑุณูุฉ**:
  ```json
  {
    "serviceType": "ุจูุดุฑ ูุชููู",
    "carModel": "ุชูููุชุง ูุงูุฑู 2020",
    "plateNumber": "ุฃ ุจ ุฌ 1234",
    "notes": "ุนุทู ูู ุงูุฅุทุงุฑุงุช",
    "latitude": 24.7136,
    "longitude": 46.6753,
    "price": 150
  }
  ```

---

### ุงููุฑุญูุฉ 2๏ธโฃ: ูุนุงูุฌุฉ ุงูุทูุจ ูู Backend

#### 2.1 ุงุณุชูุจุงู ุงูุทูุจ
- **ุงููููุน**: `SHM_backend/server.js` โ `app.post("/new-request")`
- **ุงูุชุญูู ูู ุงูุจูุงูุงุช**:
  - โ ุงูุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุญููู ุงููุทููุจุฉ
  - โ ุงูุชุญูู ูู ุตุญุฉ ุงูุฅุญุฏุงุซูุงุช
  - โ ูุนุงูุฌุฉ ุงูุณุนุฑ (ุชุญูููู ุฅูู ุฑูู ุฃู `null`)

#### 2.2 ุญูุธ ุงูุทูุจ ูู Firebase
- **Collection**: `requests`
- **ุงูุจูุงูุงุช ุงููุญููุธุฉ**:
  ```javascript
  {
    serviceType: "ุจูุดุฑ ูุชููู",
    carModel: "ุชูููุชุง ูุงูุฑู 2020",
    plateNumber: "ุฃ ุจ ุฌ 1234",
    notes: "ุนุทู ูู ุงูุฅุทุงุฑุงุช",
    latitude: 24.7136,
    longitude: 46.6753,
    price: 150,
    status: "new",  // โ ุงูุญุงูุฉ ุงูุงูุชุฑุงุถูุฉ: "new"
    createdAt: serverTimestamp(),
    updatedAt: serverTimestamp(),
    technicianId: null,  // โ ูุง ููุฌุฏ ููู ูุนูู ุจุนุฏ
    estimatedArrivalMinutes: null,  // โ ูู ูุชู ุชุญุฏูุฏ ููุช ุงููุตูู ุจุนุฏ
    estimatedArrivalTimestamp: null
  }
  ```

#### 2.3 ุฅุฑุฌุงุน ุงูุงุณุชุฌุงุจุฉ
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "message": "ุชู ุฅุฑุณุงู ุงูุทูุจ ุจูุฌุงุญ",
    "id": "abc123xyz",
    "data": { ... }
  }
  ```

---

### ุงููุฑุญูุฉ 3๏ธโฃ: ุนุฑุถ ุงูุทูุจ ูู Dashboard

#### 3.1 ุฌูุจ ุงูุทูุจุงุช
- **ุงููููุน**: `SHM_dashboard/src/Orders.jsx`
- **ุงูู Endpoint**: `GET /requests`
- **ุงูุนูููุฉ**:
  1. Dashboard ูุฌูุจ ุฌููุน ุงูุทูุจุงุช ูู Firebase
  2. ูุชู ุนุฑุถูุง ูู ุฌุฏูู ูุน:
     - ููุน ุงูุฎุฏูุฉ
     - ุญุงูุฉ ุงูุทูุจ (new, in_progress, completed, cancelled)
     - ุงูุณุนุฑ
     - ุงูููู ุงููุนูู (ุฅู ูุฌุฏ)
     - ุชุงุฑูุฎ ุงูุฅูุดุงุก

#### 3.2 ุชุนููู ุงูููู ููุทูุจ
- **ุงููููุน**: `SHM_dashboard/src/OrderDetails.jsx` โ `assignTechnician()`
- **ุงูุนูููุฉ**:
  1. ุงููุณุคูู ููุชุญ ุชูุงุตูู ุงูุทูุจ
  2. ูุฎุชุงุฑ ููู ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
  3. ูุถุบุท ุนูู "ุชุนููู ุงูููู ููุทูุจ"
  4. ูุชู ุฅุฑุณุงู `PATCH /requests/:id` ูุน:
     ```json
     {
       "technicianId": "tech123"
     }
     ```
  5. **โ๏ธ ููู**: ุงูุญุงูุฉ ุชุจูู `"new"` - ูุง ุชุชุบูุฑ ุชููุงุฆูุงู

#### 3.3 ุชุญุฏูุซ ุงูุทูุจ ูู Firebase
- **ุงููููุน**: `SHM_backend/server.js` โ `app.patch("/requests/:id")`
- **ุงูุชุญุฏูุซุงุช**:
  ```javascript
  {
    technicianId: "tech123",  // โ ุชู ุชุนููู ุงูููู
    status: "new",  // โ ุงูุญุงูุฉ ุชุจูู "new"
    updatedAt: serverTimestamp()
  }
  ```

---

### ุงููุฑุญูุฉ 4๏ธโฃ: ุนุฑุถ ุงูุทูุจ ูู ุชุทุจูู ุงูููู

#### 4.1 ุฌูุจ ุงูุทูุจุงุช
- **ุงููููุน**: `SHM_technician_app/lib/screens/home_screen.dart` โ `_loadOrders()`
- **ุงูู Endpoint**: `GET /requests`
- **ุงูููุชุฑุฉ**:
  - ุงูููู ูุฑู ููุท:
    1. โ ุงูุทูุจุงุช ุงููุฎุตุตุฉ ูู (`technicianId == currentTechnicianId`)
    2. โ **ุงูุทูุจุงุช ุบูุฑ ุงููุนููุฉ ูุงูุญุงูุฉ `"new"` (ููููู ุฃุฎุฐูุง)**
  
  **โ๏ธ ููู**: ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ (`technicianId == null` ู `status == "new"`):
  - **ุฌููุน ุงูููููู** ูููููู ุฑุคูุฉ ูุฐุง ุงูุทูุจ ูู ุชุทุจูููู
  - ุฃู ููู ููููู ุฃุฎุฐ ุงูุทูุจ (ููู ูุง ููุฌุฏ ุฒุฑ ูุฃุฎุฐ ุงูุทูุจ ุญุงููุงู)
  - ุงูุทูุจ ูุธูุฑ ุฃูุถุงู ูู Dashboard

#### 4.2 ุนุฑุถ ุงูุทูุจุงุช
- ุงูุทูุจุงุช ุชุธูุฑ ูู ูุงุฆูุฉ ูุน:
  - ููุน ุงูุฎุฏูุฉ
  - ุญุงูุฉ ุงูุทูุจ
  - ูููุน ุงูุนููู (ุนูู ุงูุฎุฑูุทุฉ)
  - ุงูุณุนุฑ

#### 4.3 ุขููุฉ ุงูุนูู ุงูุญุงููุฉ
**ุงูุณุคุงู**: ูู ุงูุทูุจ ูุฐูุจ ูุฌููุน ุงูููููู ุฃู ูุจูู ูู Dashboardุ

**ุงูุฅุฌุงุจุฉ**: **ููุงููุง!**

1. **ุนูุฏ ุฅูุดุงุก ุงูุทูุจ**:
   - ุงูุทูุจ ููุญูุธ ูู Firebase ูุน `technicianId: null` ู `status: "new"`
   - โ **ูุธูุฑ ูู Dashboard** (ูุฌููุน ุงูุทูุจุงุช)
   - โ **ูุธูุฑ ูุฌููุน ุงูููููู** ูู ุชุทุจูููู (ุงูุทูุจุงุช ุบูุฑ ุงููุนููุฉ)

2. **ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ**:
   - **ุงูุฎูุงุฑ 1**: ุงููุฏูุฑ ูุนูู ููู ูู Dashboard
     - ุงูุทูุจ ูุฎุชูู ูู ูุงุฆูุฉ "ุงูุทูุจุงุช ุบูุฑ ุงููุนููุฉ" ููููููู ุงูุขุฎุฑูู
     - ูุธูุฑ ููุท ููููู ุงููุนูู
   
   - **ุงูุฎูุงุฑ 2**: ููู ูุฃุฎุฐ ุงูุทูุจ ุจููุณู (ุบูุฑ ูุชุงุญ ุญุงููุงู)
     - ูุง ููุฌุฏ ุฒุฑ "ุฃุฎุฐ ุงูุทูุจ" ูู ุงูุชุทุจูู ุญุงููุงู
     - ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุฐู ุงูููุฒุฉ

3. **ุงูุญุงูุฉ ุงูุญุงููุฉ**:
   - โ ุงูุทูุจ ูุธูุฑ ูุฌููุน ุงูููููู ุนูุฏ ุฅูุดุงุฆู
   - โ ุงูุทูุจ ูุธูุฑ ูู Dashboard
   - โ ุงููุฏูุฑ ููููู ุชุนููู ููู ูุนูู
   - โ ุงูููู ูุง ููููู ุฃุฎุฐ ุงูุทูุจ ุจููุณู (ูุง ููุฌุฏ ุฒุฑ ูุฐูู)

---

### ุงููุฑุญูุฉ 5๏ธโฃ: ุจุฏุก ุงูุชูููุฐ ูู ุชุทุจูู ุงูููู

#### 5.1 ูุชุญ ุชูุงุตูู ุงูุทูุจ
- **ุงููููุน**: `SHM_technician_app/lib/screens/order_details_screen.dart`
- ุงูููู ููุชุญ ุชูุงุตูู ุงูุทูุจ ุงููุฎุตุต ูู

#### 5.2 ุฒุฑ "ุจุฏุก ุงูุชูููุฐ"
- **ุงูุดุฑูุท**:
  - โ ุงูุญุงูุฉ `"new"`
  - โ ุงูููู ูุนูู (`technicianId != null`)
- **ุงูุนูููุฉ**:
  1. ุงูููู ูุถุบุท ุนูู ุฒุฑ "ุจุฏุก ุงูุชูููุฐ"
  2. ูุธูุฑ dialog ุชุฃููุฏ
  3. ูุชู ุฅุฑุณุงู `PATCH /requests/:id` ูุน:
     ```json
     {
       "status": "in_progress",
       "technicianId": "tech123"
     }
     ```

#### 5.3 ุชุญุฏูุซ ุงูุญุงูุฉ ูู Firebase
- **ุงูุชุญุฏูุซุงุช**:
  ```javascript
  {
    status: "in_progress",  // โ ุชุบูุฑุช ุงูุญุงูุฉ
    technicianId: "tech123",
    updatedAt: serverTimestamp()
  }
  ```

#### 5.4 ุงูุฅุดุนุงุฑ ูู ุชุทุจูู ุงููุณุชุฎุฏู
- **ุงููููุน**: `flutter_app/lib/screens/orders_screen.dart` โ `_checkStatusChanges()`
- **ุงูุนูููุฉ**:
  1. ุงูุชุทุจูู ููุญุต ุงูุชุบููุฑุงุช ูู 5 ุซูุงูู
  2. ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ ูู `"new"` ุฅูู `"in_progress"`:
     - ูุธูุฑ ุฅุดุนุงุฑ: "ุชู ูุจูู ุทูุจู - ุงูููู ูู ุงูุทุฑูู ุฅูู ูููุนู"

---

### ุงููุฑุญูุฉ 6๏ธโฃ: ุชุญุฏูุฏ ููุช ุงููุตูู ุงููุชููุน

#### 6.1 ุชุญุฏูุฏ ุงูููุช ูู ุชุทุจูู ุงูููู
- **ุงููููุน**: `SHM_technician_app/lib/screens/order_details_screen.dart` โ `_setEstimatedArrivalTime()`
- **ุงูุนูููุฉ**:
  1. ุงูููู ูุถุบุท ุนูู "ุชุญุฏูุฏ ููุช ุงููุตูู ุงููุชููุน"
  2. ูุธูุฑ dialog ูุน ุฎูุงุฑุงุช:
     - 5 ุฏูุงุฆู
     - 10 ุฏูุงุฆู
     - 15 ุฏูุงุฆู
     - 20 ุฏูุงุฆู
     - 30 ุฏูุงุฆู
     - ุฅุฏุฎุงู ูุฏูู
  3. ูุชู ุฅุฑุณุงู `PATCH /requests/:id` ูุน:
     ```json
     {
       "estimatedArrivalMinutes": 15
     }
     ```

#### 6.2 ูุนุงูุฌุฉ ุงูููุช ูู Backend
- **ุงููููุน**: `SHM_backend/server.js` โ `app.patch("/requests/:id")`
- **ุงูุญุณุงุจุงุช**:
  ```javascript
  estimatedArrivalMinutes: 15,
  estimatedArrivalTimestamp: currentTime + 15 minutes
  ```
- **โ๏ธ ููู**: ุงูุญุงูุฉ ูุง ุชุชุบูุฑ ุชููุงุฆูุงู ุนูุฏ ุชุญุฏูุฏ ุงูููุช

#### 6.3 ุงูุฅุดุนุงุฑ ูู ุชุทุจูู ุงููุณุชุฎุฏู
- **ุงูุนูููุฉ**:
  1. ุงูุชุทุจูู ููุญุต `estimatedArrivalMinutes` ูู 5 ุซูุงูู
  2. ุนูุฏ ุชุบููุฑ ุงูููุช:
     - ูุธูุฑ ุฅุดุนุงุฑ: "ุชู ุชุญุฏูุซ ููุช ุงููุตูู - ุงูููู ุณูุตู ุฎูุงู 15 ุฏูููุฉ"

#### 6.4 ุนุฑุถ ุงูููุช ูู ุชุทุจูู ุงููุณุชุฎุฏู
- **ูู ูุงุฆูุฉ ุงูุทูุจุงุช**:
  - Badge ูุธูุฑ: "ุงููุตูู ุฎูุงู 15 ุฏูููุฉ"
- **ูู ุชูุงุตูู ุงูุทูุจ**:
  - ูุธูุฑ: "ุงููุณุงูุฉ ุงููุชุจููุฉ: 15 ุฏูููุฉ"

---

### ุงููุฑุญูุฉ 7๏ธโฃ: ุฅููุงู ุงูุทูุจ

#### 7.1 ุฅููุงู ุงูุทูุจ ูู ุชุทุจูู ุงูููู
- **ุงูุนูููุฉ**:
  1. ุงูููู ูุถุบุท ุนูู "ุฅููุงู ุงูุทูุจ"
  2. ูุชู ุฅุฑุณุงู `PATCH /requests/:id` ูุน:
     ```json
     {
       "status": "completed"
     }
     ```

#### 7.2 ุชุญุฏูุซ ุงูุญุงูุฉ
- **ุงูุชุญุฏูุซุงุช**:
  ```javascript
  {
    status: "completed",  // โ ุชู ุฅููุงู ุงูุทูุจ
    updatedAt: serverTimestamp()
  }
  ```

#### 7.3 ุงูุฅุดุนุงุฑ ูู ุชุทุจูู ุงููุณุชุฎุฏู
- ูุธูุฑ ุฅุดุนุงุฑ: "ุชู ุฅููุงู ุทูุจู - ุดูุฑุงู ูุงุณุชุฎุฏุงูู ุฎุฏูุงุช ุณูู"

---

## ๐ ุญุงูุงุช ุงูุทูุจ (Status Flow)

```
โโโโโโโโโโโ
โ  new    โ  โ ุงูุทูุจ ุงูุฌุฏูุฏ (ูู ุงููุณุชุฎุฏู)
โโโโโโฌโโโโโ
     โ
     โ (ุชุนููู ุงูููู ูู Dashboard)
     โ
     โผ
โโโโโโโโโโโ
โ  new    โ  โ ุงูุญุงูุฉ ุชุจูู "new" ุญุชู ูุถุบุท ุงูููู ุนูู "ุจุฏุก ุงูุชูููุฐ"
โ + tech  โ
โโโโโโฌโโโโโ
     โ
     โ (ุงูููู ูุถุบุท "ุจุฏุก ุงูุชูููุฐ")
     โ
     โผ
โโโโโโโโโโโโโโโโ
โ in_progress  โ  โ ุงูุทูุจ ููุฏ ุงูุชูููุฐ
โ + tech       โ
โ + arrival    โ  โ (ุงุฎุชูุงุฑู) ููุช ุงููุตูู ุงููุชููุน
โโโโโโฌโโโโโโโโโโ
     โ
     โ (ุงูููู ูุถุบุท "ุฅููุงู ุงูุทูุจ")
     โ
     โผ
โโโโโโโโโโโโโโโ
โ completed   โ  โ ุงูุทูุจ ููุชูู
โโโโโโโโโโโโโโโ
```

---

## ๐ ุงูุญููู ุงูุฑุฆูุณูุฉ ูู Firebase

### ุนูุฏ ุงูุฅูุดุงุก:
- `serviceType`: ููุน ุงูุฎุฏูุฉ
- `carModel`: ููุน ูููุฏูู ุงูุณูุงุฑุฉ
- `plateNumber`: ุฑูู ุงูููุญุฉ
- `notes`: ูุตู ุงููุดููุฉ
- `latitude`, `longitude`: ูููุน ุงูุนููู
- `price`: ุงูุณุนุฑ
- `status`: `"new"`
- `createdAt`: ููุช ุงูุฅูุดุงุก
- `technicianId`: `null`

### ุจุนุฏ ุชุนููู ุงูููู:
- `technicianId`: `"tech123"` โ
- `status`: `"new"` (ูุง ูุชุบูุฑ)

### ุจุนุฏ ุจุฏุก ุงูุชูููุฐ:
- `status`: `"in_progress"` โ
- `technicianId`: `"tech123"`

### ุจุนุฏ ุชุญุฏูุฏ ููุช ุงููุตูู:
- `estimatedArrivalMinutes`: `15` โ
- `estimatedArrivalTimestamp`: `Timestamp` โ
- `status`: `"in_progress"` (ูุง ูุชุบูุฑ)

### ุจุนุฏ ุงูุฅููุงู:
- `status`: `"completed"` โ

---

## ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ูู ุชุทุจูู ุงููุณุชุฎุฏู:
1. **ุชุบููุฑ ุงูุญุงูุฉ ุฅูู `in_progress`**:
   - "ุชู ูุจูู ุทูุจู - ุงูููู ูู ุงูุทุฑูู ุฅูู ูููุนู"

2. **ุชุญุฏูุซ ููุช ุงููุตูู**:
   - "ุชู ุชุญุฏูุซ ููุช ุงููุตูู - ุงูููู ุณูุตู ุฎูุงู X ุฏูููุฉ"

3. **ุฅููุงู ุงูุทูุจ**:
   - "ุชู ุฅููุงู ุทูุจู - ุดูุฑุงู ูุงุณุชุฎุฏุงูู ุฎุฏูุงุช ุณูู"

### ุขููุฉ ุงููุญุต:
- ูุชู ูุญุต ุงูุชุบููุฑุงุช ูู **5 ุซูุงูู** ุชููุงุฆูุงู
- ูุชู ููุงุฑูุฉ ุงูุญุงูุฉ ุงูุญุงููุฉ ูุน ุงูุญุงูุฉ ุงูุณุงุจูุฉ
- ูุชู ููุงุฑูุฉ `estimatedArrivalMinutes` ุงูุญุงูู ูุน ุงูุณุงุจู

---

## ๐ฑ ุงูุชุทุจููุงุช ุงููุดุงุฑูุฉ

### 1. ุชุทุจูู ุงููุณุชุฎุฏู (`flutter_app`)
- **ุฅูุดุงุก ุงูุทูุจ**: `request_screen.dart`
- **ุนุฑุถ ุงูุทูุจุงุช**: `orders_screen.dart`
- **ูุฑุงูุจุฉ ุงูุชุบููุฑุงุช**: ูู 5 ุซูุงูู

### 2. Dashboard (`SHM_dashboard`)
- **ุนุฑุถ ุฌููุน ุงูุทูุจุงุช**: `Orders.jsx`
- **ุชุนููู ุงูููู**: `OrderDetails.jsx`

### 3. ุชุทุจูู ุงูููู (`SHM_technician_app`)
- **ุนุฑุถ ุงูุทูุจุงุช ุงููุฎุตุตุฉ**: `home_screen.dart`
- **ุจุฏุก ุงูุชูููุฐ**: `order_details_screen.dart` โ `_updateStatus('in_progress')`
- **ุชุญุฏูุฏ ููุช ุงููุตูู**: `order_details_screen.dart` โ `_setEstimatedArrivalTime()`
- **ุฅููุงู ุงูุทูุจ**: `order_details_screen.dart` โ `_updateStatus('completed')`

### 4. Backend (`SHM_backend`)
- **ุฅูุดุงุก ุงูุทูุจ**: `POST /new-request`
- **ุฌูุจ ุงูุทูุจุงุช**: `GET /requests`
- **ุชุญุฏูุซ ุงูุทูุจ**: `PATCH /requests/:id`

---

## โ๏ธ ููุงุท ูููุฉ

1. **ุงูุญุงูุฉ ูุง ุชุชุบูุฑ ุชููุงุฆูุงู ุนูุฏ ุชุนููู ุงูููู**:
   - ุชุจูู `"new"` ุญุชู ูุถุบุท ุงูููู ุนูู "ุจุฏุก ุงูุชูููุฐ"

2. **ุงูุญุงูุฉ ูุง ุชุชุบูุฑ ุชููุงุฆูุงู ุนูุฏ ุชุญุฏูุฏ ููุช ุงููุตูู**:
   - ุชุจูู ููุง ูู ุญุชู ูุถุบุท ุงูููู ุนูู "ุจุฏุก ุงูุชูููุฐ"

3. **ุงููุญุต ุงูุชููุงุฆู ููุชุบููุฑุงุช**:
   - ุชุทุจูู ุงููุณุชุฎุฏู ููุญุต ุงูุชุบููุฑุงุช ูู 5 ุซูุงูู
   - ูุง ูุญุชุงุฌ ุงููุณุชุฎุฏู ูุชุญุฏูุซ ูุฏูู

4. **ุงูููุชุฑุฉ ูู ุชุทุจูู ุงูููู**:
   - ุงูููู ูุฑู ููุท:
     - ุงูุทูุจุงุช ุงููุฎุตุตุฉ ูู
     - ุงูุทูุจุงุช ุบูุฑ ุงููุนููุฉ (`technicianId == null` ู `status == "new"`)

5. **โ๏ธ ุขููุฉ ุนุฑุถ ุงูุทูุจุงุช ุบูุฑ ุงููุนููุฉ**:
   - ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ (`technicianId == null`):
     - โ ูุธูุฑ ูู Dashboard (ูููุฏูุฑ)
     - โ **ูุธูุฑ ูุฌููุน ุงูููููู** ูู ุชุทุจูููู
   - ุจุนุฏ ุชุนููู ููู ูู Dashboard:
     - โ ูุฎุชูู ูู ูุงุฆูุฉ ุงูููููู ุงูุขุฎุฑูู
     - โ ูุธูุฑ ููุท ููููู ุงููุนูู
   - **ููุงุญุธุฉ**: ุญุงููุงู ูุง ููุฌุฏ ุฒุฑ ููููู ูุฃุฎุฐ ุงูุทูุจ ุจููุณู - ูุญุชุงุฌ ุชุนููู ูู Dashboard

---

## ๐ ููุฎุต ุงูุชุฏูู ุงููุงูู

```
1. ุงููุณุชุฎุฏู ูููุฃ ุจูุงูุงุช ุงูุทูุจ
   โ
2. ุฅุฑุณุงู ุฅูู Backend (POST /new-request)
   โ
3. ุญูุธ ูู Firebase (status: "new", technicianId: null)
   โ
4. ุนุฑุถ ูู Dashboard
   โ
5. ุชุนููู ููู ูู Dashboard (technicianId: "tech123", status: "new")
   โ
6. ุงูุทูุจ ูุธูุฑ ูู ุชุทุจูู ุงูููู
   โ
7. ุงูููู ูุถุบุท "ุจุฏุก ุงูุชูููุฐ" (status: "in_progress")
   โ
8. ุฅุดุนุงุฑ ูู ุชุทุจูู ุงููุณุชุฎุฏู: "ุชู ูุจูู ุทูุจู"
   โ
9. ุงูููู ูุญุฏุฏ ููุช ุงููุตูู (estimatedArrivalMinutes: 15)
   โ
10. ุฅุดุนุงุฑ ูู ุชุทุจูู ุงููุณุชุฎุฏู: "ุงูููู ุณูุตู ุฎูุงู 15 ุฏูููุฉ"
   โ
11. ุงูููู ูููู ุงูุทูุจ (status: "completed")
   โ
12. ุฅุดุนุงุฑ ูู ุชุทุจูู ุงููุณุชุฎุฏู: "ุชู ุฅููุงู ุทูุจู"
```

---

## ๐ ููุงุญุธุงุช ุชูููุฉ

### Firebase Structure:
```
requests/
  โโโ {requestId}/
      โโโ serviceType: string
      โโโ carModel: string
      โโโ plateNumber: string
      โโโ notes: string
      โโโ latitude: number
      โโโ longitude: number
      โโโ price: number | null
      โโโ status: "new" | "in_progress" | "completed" | "cancelled"
      โโโ technicianId: string | null
      โโโ estimatedArrivalMinutes: number | null
      โโโ estimatedArrivalTimestamp: Timestamp | null
      โโโ createdAt: Timestamp
      โโโ updatedAt: Timestamp
```

### API Endpoints:
- `POST /new-request` - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- `GET /requests` - ุฌูุจ ุฌููุน ุงูุทูุจุงุช
- `PATCH /requests/:id` - ุชุญุฏูุซ ุทูุจ (ุญุงูุฉุ ูููุ ููุช ูุตูู)
- `DELETE /requests/:id` - ุญุฐู ุทูุจ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-01-24
**ุขุฎุฑ ุชุญุฏูุซ**: 2026-01-24
